<p id="notice"><%= notice %></p>

<h1>Tasks</h1>

<span>Task count :</span><%= current_user.tasks.count %>
<span>Completed count :</span><%= current_user.tasks.where(completed: true).count %>

<br/>
<%= link_to 'New Task', new_task_path %>
<%= render 'filter', tasks: @tasks %>

<%= form_with(url: "tasks", method: "get") do %>
  <%= select_tag :category_id, options_from_collection_for_select(current_user.categories, :id, :name), onchange: "this.form.submit();", prompt: "Filter categories" %>

  <%= text_field_tag :search, params[:search], onkeyup: "this.form.submit();" %>

  <%= select_tag :completion, options_for_select([['All', ''], ['Completed', true], ['In Progress', false]]), onchange: "this.form.submit();" %>

      <div class="flexbox">
      <%= form.radio_button :priority, 0 %><%= form.label "Low" %>
      <%= form.radio_button :priority, 1 %><%= form.label "Mid" %>
      <%= form.radio_button :priority, 2 %><%= form.label "High" %>
    </div>

  <%= form.submit %>
<% end %>

<%= render 'task', tasks: @tasks %>

<br>